   <link rel="stylesheet" href="<?php echo assets_url(); ?>new/plugins/flatpickr/flatpickr.min.css">

   <div id="ajaxdata">
 <!-- Main body -->
    <div class="main-body">
      <!-- Breadcrumb -->
      <nav aria-label="breadcrumb" class="main-breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="<?php echo base_url();?>Dashboard">Home</a></li>
          <li class="breadcrumb-item active" aria-current="page">Credit Notes</li>
        </ol>
      </nav>
      <!-- /Breadcrumb -->
            <h5>Manage Credit Notes</h5>
      <div class="card">
        <div class="card-body">
          <!-- Toolbar -->         
          
        <form action="<?php echo base_url().'CreditNotes/'; ?>"  method="post" enctype="multipart/form-data">
            <div class="row">
        <div class="col-sm-4">
            <input type="text" class="form-control datepicker-input form-control-sm" autocomplete="off" placeholder="Start Date" name="start_date" id="start_date" value="">
            <span class="small" id="start_date_error" style="color:red;"></span> 
        </div>
        <div class="col-sm-4">
            <input type="text" class="form-control datepicker-input1 form-control-sm" autocomplete="off" placeholder="End Date" name="end_date" id="end_date" value="">
            <span class="small" id="end_date_error" style="color:red;"></span> 
        </div>
        <div class="col-sm-1">
            <input type="submit" class="form-control form-control-sm btn-primary"  name="go" id="go" value="Go">
        </div>
         </div>
        </form>
       
        <br />
          <div class="table-responsive">
            <table class="table table-bordered table-sm has-checkAll mb-0" data-bulk-target="#bulk-dropdown" data-checked-class="table-warning" id="example">
              <!-- Filter columns -->
              <thead class="thead-primary">               
                <tr>
                  <th scope="col"><?php echo lang('credit_note_number');?></th>
                  <th scope="col"><?php echo lang('date');?></th>
                  <th scope="col"><?php echo lang('barrower_name');?></th>
                  <th scope="col"><?php echo lang('account_number');?></th>
                  <th scope="col"><?php echo lang('associated_invoice_number');?></th>
                  <th scope="col"><?php echo lang('associated_invoice_date');?></th>
                  <th scope="col"><?php echo lang('credit_note_amount');?></th>
                  <!--<th scope="col">Created By</th>-->
                  <th scope="col">Created Date & Time</th>       
                </tr>
              </thead>

              <tbody>
                <?php if(!empty($Credit_notes)){
                  $i = 1;
                  $j =1;
                foreach($Credit_notes as $value){ ?>
                  <tr id='delete_<?php echo $value->credit_note_id;?>'>
                    <td><?php echo $value->credit_note_id; ?></td>
                    <td><?php echo $value->created_date; ?></td>
                    <td><?php echo getBarrowerName($value->invoice_id); ?></td>
                    <td><?php echo $value->account_no; ?></td>
                    <td><a href="<?php echo base_url(); ?>Invoice/invoice_view/<?php echo $value->invoice_id; ?>"><?php echo $value->invoice_id; ?></a></td>
                    <td><?php echo $value->inv_date; ?></td>
                    <td><?php echo $value->credit_note_amount; ?></td>
                    
                    <?php /* <td><?php echo getEmployeeName($value->inserted_by); ?></td> */ ?>
                    <td><?php echo date('d-m-Y H:i:s', strtotime($value->inserted_date)); ?></td>
                    
                  </tr>
                   
              <?php $j++;  $i++; }
               }   else { ?>
                  <tr><td colspan="12">No Data found</td></tr>
                <?php } ?>
              </tbody>
            </table><!-- /.table -->

          </div><!-- /.table-responsive -->
            <nav aria-label="Page navigation example">
            <?php echo $links; ?>
            </nav>
      </div>

    
    </div>
    <!-- /Main body -->
</div>
  </div>
  <!-- /Main -->

  <!-- Main Scripts -->
  <script src="<?php echo assets_url(); ?>new/js/jquery.min.js"></script>
  <script src="<?php echo assets_url(); ?>new/js/bootstrap.bundle.min.js"></script>
  <script src="<?php echo assets_url(); ?>new/plugins/simplebar/simplebar.min.js"></script>
  <script src="<?php echo assets_url(); ?>new/plugins/feather-icons/feather.min.js"></script>
  <script src="<?php echo assets_url(); ?>new/js/script.min.js"></script>
  
  <!-- Plugins -->
  <script src="<?php echo assets_url(); ?>new/plugins/datatables/jquery.dataTables.bootstrap4.responsive.min.js"></script>
      <script src="<?php echo assets_url(); ?>new/plugins/flatpickr/flatpickr.min.js"></script>

  <script>
  var end_date = '';
    $(() => {
        
        
           // Allow Input
      flatpickr('.datepicker-input', {
          minDate: "today",
        allowInput: true,
        onChange: function(dateObj, dateStr) {
           // console.info(dateObj);
           // console.info(dateStr);
            flatpickr('.datepicker-input1', {
                minDate: dateStr,
                allowInput: true
              })
        }
        
      })
      
      
      
          // Run datatable
      var table = $('#example').DataTable({
           dom: 'Bfrtip',
        buttons: [
            {
                extend: 'excelHtml5',
                title: 'Data export'
            },
            {
                extend: 'pdfHtml5',
                title: 'Data export'
            }
        ],
        drawCallback: function() {
          $('.dataTables_paginate > .pagination').addClass('pagination-sm') // make pagination small
        }
      })
      // Apply column filter
      $('#example .dt-column-filter th').each(function(i) {
        $('input', this).on('keyup change', function() {
          if (table.column(i).search() !== this.value) {
            table
              .column(i)
              .search(this.value)
              .draw()
          }
        })
      })
      // Toggle Column filter function
      var responsiveFilter = function(table, index, val) {
        var th = $(table).find('.dt-column-filter th').eq(index)
        val === true ? th.removeClass('d-none') : th.addClass('d-none')
      }
      // Run Toggle Column filter at first
      $.each(table.columns().responsiveHidden(), function(index, val) {
        responsiveFilter('#example', index, val)
      })
      // Run Toggle Column filter on responsive-resize event
      table.on('responsive-resize', function(e, datatable, columns) {
        $.each(columns, function(index, val) {
          responsiveFilter('#example', index, val)
        })
      })
    })

 $(document).ready(function() {
  $('.pagination').on('click','a',function(e){  
   var href = $(this).attr('href');  
    $.ajax({
      url: href,
      type: 'POST',
      async : false,
      datatype:'application/json',
      data: '',
      success: function(response){  
        $('#ajaxdata').html(response);            
      }
    }); 
    return false; 
  });
});


</script>
</body>
</html>